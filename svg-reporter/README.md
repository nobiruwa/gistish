# svg-reporter

お遊びで帳票に見える何かを出力したいと思い、SVGで構築することにしました。

## アイディア

1. Inkscapeによるsvgの作成
   1. 編集時のファイルフォーマットは`Inkscape SVG`とします。
   1. ページサイズはA4などとします。
   1. 罫線用のレイヤーとプレースホルダー(プログラムによって、テキストが埋め込まれる領域)用のレイヤーを分けます。
   1. 帳票`<rect>`と`<path>`で罫線を作成します。
   1. プレースホルダーレイヤーにプレースホルダー要素`<rect>`を置きます。オブジェクトのプロパティを開き、(`Shift+Ctrl+O`で開く)以下の規約で値を設定します。
      1. 線種を点線にするとよいでしょう。
      1. IDにはプレースホルダーと分かるようプレフィックス`placeholder_`を付けます。用途を特定できるようなIDを名付けてください。
      1. ラベルにはIDの先頭に`#`を付けた文字列とすればよいでしょう。
      1. タイトルは空のままでよいです。
      1. 詳細には、文字列のスタイルを記述します。HTMLの`style`属性の値と同じ書式とします。
         - 例: `font-style:normal;font-weight:normal;font-size:8px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;word-wrap:break-word;`
   1. プログラムが使用するファイルフォーマット`Plain SVG`を別ファイルとして保存します。
1. プログラムによる帳票作成は以下のフローに従います。
   1. 適用したい文字列にIDを与えます。
   1. 文字列のIDにプレフィックス`placeholder_`を付けてプレースホルダーを検索します。
   1. `<foreignObject>`要素を作り、プレースホルダーが持つ`x` `y` `width` `height`属性をコピーします。
      1. `<foreignObject>`要素の子要素として`<div>`要素を作り、`innerHTML`に文字列を代入します。プレースホルダーの子要素`<desc>`から文字列のスタイルを取り出し、`style`属性にコピーします。
         - スタイルをsvgファイルに持たせるのではなく、文字列とセットでプログラム側に持たせることもできるでしょう。
      1. `<svg>`要素の子要素として、`<foreignObject x="..." ...><div style="...">...</div></foreignObject>`を追加します。
      1. プレースホルダー要素を削除するか、プレースホルダーレイヤーを`style="display:none;"`にします。
